window.location.pathname.startsWith("/post/")&&window.addEventListener("load",()=>{const e=document.querySelector(".main .post-single>.toc").offsetTop,l=document.querySelector(".main .toc"),s=[];if(null!==l){const t=l.cloneNode(!0);t.classList.add("aside"),t.querySelector("details").setAttribute("open","");const o=t.querySelectorAll(".inner ul>li");for(let e=0;e<o.length;e++)o[e].classList.add("toc-non-select"),s[e]=decodeURI(o[e].querySelector("a").getAttribute("href"));e<window.pageYOffset?t.classList.add("reveal"):e>=window.pageYOffset&&t.classList.add("hide"),l.parentNode.insertBefore(t,l.nextSibling)}let t=0;const o=document.querySelector("header.header");let c=null,n=null;window.addEventListener("scroll",()=>{const i=window.pageYOffset;if(i<=10)o.classList.remove("scroll-up");else{if(i>100&&(i>t&&!o.classList.contains("scroll-down")?(o.classList.remove("scroll-up"),o.classList.add("scroll-down")):i<t&&o.classList.contains("scroll-down")&&(o.classList.remove("scroll-down"),o.classList.add("scroll-up"))),null!==l){const l=document.querySelector(".main .toc.aside");e<i&&l.classList.contains("hide")?(l.classList.remove("hide"),l.classList.add("reveal")):e>=i&&l.classList.contains("reveal")&&(l.scrollTop=0,l.classList.remove("reveal"),l.classList.add("hide"));const t=l.querySelectorAll(".inner ul>li");let o=null;for(let e=0;e<s.length;e++){document.querySelector(s[e]).offsetTop<=i&&(c=t[e],o=e)}if(null!==o){if(Math.ceil(i+window.innerHeight)>=document.body.scrollHeight){for(let e=0;e<t.length;e++)t[e].classList.remove("toc-select");t[s.length-1].classList.add("toc-select"),n=t[s.length-1]}else{if(null!==c&&null!==n&&c===n)return;for(let e=0;e<t.length;e++)t[e].classList.remove("toc-select");c.classList.add("toc-select"),n=c}null!==o&&l.scroll({behavior:"smooth",top:20*o})}else{if(null===l.querySelector(".toc-select"))return;for(let e=0;e<t.length;e++)t[e].classList.remove("toc-select")}}t=i}})});