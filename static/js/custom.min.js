window.location.pathname.startsWith("/post/")&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main .post-single>.toc").offsetTop,s=document.querySelector(".main .toc"),l=[];if(null!==s){const t=s.cloneNode(!0);t.classList.add("aside"),t.querySelector("details").setAttribute("open","");const o=t.querySelectorAll(".inner ul>li");for(let e=0;e<o.length;e++)o[e].classList.contains("non-selected")||(o[e].classList.add("non-selected"),l[e]=decodeURI(o[e].querySelector("a").getAttribute("href")));e<window.pageYOffset?t.classList.add("reveal"):e>=window.pageYOffset&&t.classList.add("hide"),s.parentNode.insertBefore(t,s.nextSibling)}let t=0;const o=document.querySelector("header.header"),c=document.querySelector(".main .toc.aside");let n=null,i=null;window.addEventListener("scroll",()=>{const a=window.pageYOffset;if(e>=a&&c.classList.contains("reveal")&&(c.scrollTop=0,c.classList.remove("reveal"),c.classList.add("hide")),a<=0&&!o.classList.contains("scroll-up"))return o.classList.remove("scroll-down"),void o.classList.add("scroll-up");if(a<=10)o.classList.remove("scroll-up");else{if(a>80&&(a>t&&!o.classList.contains("scroll-down")?(o.classList.remove("scroll-up"),o.classList.add("scroll-down")):a<t&&o.classList.contains("scroll-down")&&(o.classList.remove("scroll-down"),o.classList.add("scroll-up"))),null!==s){e<a&&c.classList.contains("hide")?(c.classList.remove("hide"),c.classList.add("reveal")):e>=a&&c.classList.contains("reveal")&&(c.scrollTop=0,c.classList.remove("reveal"),c.classList.add("hide"));const s=c.querySelectorAll(".inner ul>li");let t=null;for(let e=0;e<l.length;e++){document.querySelector(l[e]).offsetTop<=a&&(n=s[e],t=e)}if(null!==t){if(Math.ceil(a+window.innerHeight)>=document.body.scrollHeight){for(let e=0;e<s.length;e++)s[e].classList.contains("selected")&&s[e].classList.remove("selected");s[l.length-1].classList.add("selected"),i=s[l.length-1]}else{if(null!==n&&null!==i&&n===i)return;for(let e=0;e<s.length;e++)s[e].classList.contains("selected")&&s[e].classList.remove("selected");n.classList.add("selected"),i=n}null!==t&&c.scroll({behavior:"smooth",top:20*t})}else{if(null===c.querySelector(".selected"))return;for(let e=0;e<s.length;e++)s[e].classList.contains("selected")&&s[e].classList.remove("selected")}}t=a}})});