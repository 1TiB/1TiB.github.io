<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>[아이템 28] 배열보다는 리스트를 사용하라 | &lt;Qutrits/></title>
<meta name=keywords content="Java,Effective Java 3E">
<meta name=description content="[아이템 28] 배열보다는 리스트를 사용하라. 배열과 제네릭 타입의 차이 첫번째 차이점. 배열은 공변 입니다. 어려워 보이는 단어지만 뜻은 간단합니다. Sub가 Super의 하위 타입이라면 배열 Sub[]는 배열 Super[]의 하위 타입이 됩니다.
반면, 제네릭은 불공변입니다. 즉 서로 다른 타입 Type1과 Type2가 있을 때, List<Type1>은 List<Type2>의 하위 타입도 아니고 상위 타입도 아닙니다.
이것만 보면 제네릭에 문제가 있다고 생각할 수 있지만, 사실 문제가 있는 건 배열 쪽입니다. 다음은 문법상 허용되는 코드입니다.
1 2 3  // 런타임 에러 Object[] objectArray = new Long[1]; objectArray[0] = &#34;타입이 달라 넣을 수 없다.">
<meta name=author content="Kyungchul Shin">
<link rel=canonical href=https://qutrits.github.io/posts/effective-java-3e/chapter-04/item28/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.e59df32028ee8a537417b23fd386822c3de49be817d728a2918b382a600d4927.css integrity="sha256-5Z3zICjuilN0F7I/04aCLD3km+gX1yiikYs4KmANSSc=" rel="preload stylesheet" as=style>
<link rel=preload href=/icon/home.webp as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://qutrits.github.io/icon/favicon-64.png>
<link rel=icon type=image/png sizes=16x16 href=https://qutrits.github.io/icon/favicon-16.png>
<link rel=icon type=image/png sizes=32x32 href=https://qutrits.github.io/icon/favicon-32.png>
<link rel=apple-touch-icon href=https://qutrits.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://qutrits.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.89.4">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script defer crossorigin=anonymous src=/assets/js/extended/custom.min.610c2195d4f13fec5206b70eeb9f601c1cc029ff451ed0aff45972142e252db9.js integrity="sha256-YQwhldTxP+xSBrcO659gHBzAKf9FHtCv9FlyFC4lLbk="></script><meta property="og:title" content="[아이템 28] 배열보다는 리스트를 사용하라">
<meta property="og:description" content="[아이템 28] 배열보다는 리스트를 사용하라. 배열과 제네릭 타입의 차이 첫번째 차이점. 배열은 공변 입니다. 어려워 보이는 단어지만 뜻은 간단합니다. Sub가 Super의 하위 타입이라면 배열 Sub[]는 배열 Super[]의 하위 타입이 됩니다.
반면, 제네릭은 불공변입니다. 즉 서로 다른 타입 Type1과 Type2가 있을 때, List<Type1>은 List<Type2>의 하위 타입도 아니고 상위 타입도 아닙니다.
이것만 보면 제네릭에 문제가 있다고 생각할 수 있지만, 사실 문제가 있는 건 배열 쪽입니다. 다음은 문법상 허용되는 코드입니다.
1 2 3  // 런타임 에러 Object[] objectArray = new Long[1]; objectArray[0] = &#34;타입이 달라 넣을 수 없다.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://qutrits.github.io/posts/effective-java-3e/chapter-04/item28/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-07-08T14:21:51+09:00">
<meta property="article:modified_time" content="2020-07-08T14:21:51+09:00">
<meta property="og:see_also" content="https://qutrits.github.io/posts/effective-java-3e/chapter-04/item33/"><meta property="og:see_also" content="https://qutrits.github.io/posts/effective-java-3e/chapter-04/item32/"><meta property="og:see_also" content="https://qutrits.github.io/posts/effective-java-3e/chapter-04/item31/"><meta property="og:see_also" content="https://qutrits.github.io/posts/effective-java-3e/chapter-04/item30/"><meta property="og:see_also" content="https://qutrits.github.io/posts/effective-java-3e/chapter-04/item29/">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="[아이템 28] 배열보다는 리스트를 사용하라">
<meta name=twitter:description content="[아이템 28] 배열보다는 리스트를 사용하라. 배열과 제네릭 타입의 차이 첫번째 차이점. 배열은 공변 입니다. 어려워 보이는 단어지만 뜻은 간단합니다. Sub가 Super의 하위 타입이라면 배열 Sub[]는 배열 Super[]의 하위 타입이 됩니다.
반면, 제네릭은 불공변입니다. 즉 서로 다른 타입 Type1과 Type2가 있을 때, List<Type1>은 List<Type2>의 하위 타입도 아니고 상위 타입도 아닙니다.
이것만 보면 제네릭에 문제가 있다고 생각할 수 있지만, 사실 문제가 있는 건 배열 쪽입니다. 다음은 문법상 허용되는 코드입니다.
1 2 3  // 런타임 에러 Object[] objectArray = new Long[1]; objectArray[0] = &#34;타입이 달라 넣을 수 없다.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://qutrits.github.io/posts/"},{"@type":"ListItem","position":2,"name":"[아이템 28] 배열보다는 리스트를 사용하라","item":"https://qutrits.github.io/posts/effective-java-3e/chapter-04/item28/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[아이템 28] 배열보다는 리스트를 사용하라","name":"[아이템 28] 배열보다는 리스트를 사용하라","description":"[아이템 28] 배열보다는 리스트를 사용하라. 배열과 제네릭 타입의 차이 첫번째 차이점. 배열은 공변 입니다. 어려워 보이는 단어지만 뜻은 간단합니다. Sub가 Super의 하위 타입이라면 배열 Sub[]는 배열 Super[]의 하위 타입이 됩니다.\n반면, 제네릭은 불공변입니다. 즉 서로 다른 타입 Type1과 Type2가 있을 때, List\u0026lt;Type1\u0026gt;은 List\u0026lt;Type2\u0026gt;의 하위 타입도 아니고 상위 타입도 아닙니다.\n이것만 보면 제네릭에 문제가 있다고 생각할 수 있지만, 사실 문제가 있는 건 배열 쪽입니다. 다음은 문법상 허용되는 코드입니다.\n1 2 3  // 런타임 에러 Object[] objectArray = new Long[1]; objectArray[0] = \u0026#34;타입이 달라 넣을 수 없다.","keywords":["Java","Effective Java 3E"],"articleBody":"[아이템 28] 배열보다는 리스트를 사용하라. 배열과 제네릭 타입의 차이 첫번째 차이점. 배열은 공변 입니다. 어려워 보이는 단어지만 뜻은 간단합니다. Sub가 Super의 하위 타입이라면 배열 Sub[]는 배열 Super[]의 하위 타입이 됩니다.\n반면, 제네릭은 불공변입니다. 즉 서로 다른 타입 Type1과 Type2가 있을 때, List은 List의 하위 타입도 아니고 상위 타입도 아닙니다.\n이것만 보면 제네릭에 문제가 있다고 생각할 수 있지만, 사실 문제가 있는 건 배열 쪽입니다. 다음은 문법상 허용되는 코드입니다.\n1 2 3  // 런타임 에러 Object[] objectArray = new Long[1]; objectArray[0] = \"타입이 달라 넣을 수 없다.\"; // 런타임시 ArrayStoreException을 던진다   1 2  // 컴파일 에러 ListObject ol = new ArrayListLong(); // 호환되지 않는 타입   어느 쪽이든 Long용 저장소에 String을 넣을 수 없습니다. 다만 배열 같은 경우 런타임에야 알 수 있고, 리스트는 컴파일 시에 알아챌 수 있어서 더 좋습니다.\n두번째 차이점. 배열은 실체화(reify)됩니다. 무슨 뜻이냐면 배열은 런타임에도 자신이 담기로 한 원소의 타입을 인지하고 확인합니다. 그래서 위 코드에서 Long배열에 String을 넣으려 하면 ArrayStoreException이 발생합니다. 반면 제네릭은 타입 정보가 런타임에는 소거(erasure)됩니다.\n원소 타입을 컴파일타임에만 검사하며 런타임에는 알 수 조차도 없다는 뜻입니다. 소거는 제네릭 지원되기 전의 레거시 코드와 제네릭 타입을 함께 사용할 수 있게 해주는 메커니즘으로, JAVA 5가 제네릭으로 순조롭게 전환될 수 있도록 해주었습니다.\n이상의 주요 차이로 인해 배열과 제네릭은 잘 어울러지지 못합니다. 예컨대 배열은 제네릭 타입, 매개변수화 타입, 타입 매개변수로 사용할 수 없습니다. 즉 코드를 new List[], new List[], new E[] 식으로 작성하면 컴파일할 때 제네릭 배열 생성 오류를 일으킵니다.\n제네릭 배열을 만들지 못하게 막은 이유 타입이 안전하지 않기 때문입니다. 이를 허용하면 컴파일러가 자동 생성한 형변환 코드에서 런타임에 ClassCaseException이 발생할 수 있습니다. 런타임에 ClassCaseException이 발생하는 일을 막아주겠다는 제네릭 타입 시스템의 취지에 어긋나는 것입니다.\n1 2 3 4 5 6  // 컴파일 되지 않는다. ListString[] stingLists = new ListString[1]; // (1) ListInteger intList = List.of(42); // (2) Object[] objects = stingLists; // (3) Object[0] = intList; // (4) String s = stingLists[0].get(0); // (5)   제네릭 배열을 생성하는 (1)이 허용된다고 가정해봅시다. (2)는 원소 하나인 List를 생성합니다. (3)은 (1)에서 생성한 List의 배열을 Object 배열에 할당합니다.\n배열은 공변이니 아무 문제가 없습니다. (4)는 (2)에서 생성한 List의 인스턴스를 Object 배열의 첫 원소로 저장합니다. 제네릭은 소거 방식으로 구현되어서 이 역시 성공합니다.\n즉, 런타임에는 List 소거 방식으로 이 역시 소거됩니다. 즉 런타임에는 List인스턴스의 타입은 단순히 List가 되고, List[] 인스턴스의 타입은 List[]가 됩니다. 따라서 (4)에서도 ArrayStoreException을 발생시키지 않습니다.\n문제는 List인스턴스만 담겠다고 선언한 stingLists 배열에는 지금 List 인스턴스가 저장돼 있습니다. 결국 (5)에서 ClassCaseExceptionn이 발생하게 됩니다. 이런 일을 방지하려면 (제네릭 배열이 생성되지 않도록) (1)에서 컴파일 오류를 발생해야 합니다.\nE, List, List 같은 타입을 실체화 불가 타입(non-reifiable type)이라 합니다. 쉽게 말하자면, 실체화되지 않아서 런타임에는 컴파일타임보다 타입 정보를 적게 가지는 타입입니다. 소거 메커니즘 때문에 매개변수화 타입 가운데 실체화될 수 있는 타입은 List와 Map같은 비한정적 와일드카드 타입뿐입니다. 배열을 비한정적 와일드카드 타입으로 만들 수는 있지만, 유용하게 쓰일 일은 별로 없습니다.\n정리  배열은 공변이고 실체화가 되지만 제네릭은 불공변이고 타입 정보가 소거됩니다. 배열은 런타임에는 타입 안전하지만 컴파일타임에는 그렇지 않습니다.  ","wordCount":"459","inLanguage":"en","datePublished":"2020-07-08T14:21:51+09:00","dateModified":"2020-07-08T14:21:51+09:00","author":[{"@type":"Person","name":"Kyungchul Shin"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://qutrits.github.io/posts/effective-java-3e/chapter-04/item28/"},"publisher":{"@type":"Organization","name":"\u003cQutrits/\u003e","logo":{"@type":"ImageObject","url":"https://qutrits.github.io/icon/favicon-64.png"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://qutrits.github.io/ accesskey=h title="<Qutrits/> (Alt + H)">
<img src=/icon/home.webp alt=logo aria-label=logo height=25>&lt;Qutrits/></a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://qutrits.github.io/series-list/ title=시리즈>
<span>시리즈</span>
</a>
</li>
<li>
<a href=https://qutrits.github.io/collection/ title=모아보기>
<span>모아보기</span>
</a>
</li>
<li>
<a href=https://qutrits.github.io/archives/ title="기록 보관소">
<span>기록 보관소</span>
</a>
</li>
<li>
<a href=https://qutrits.github.io/search/ title="검색 (Alt + /)" accesskey=/>
<span>검색</span>
</a>
</li>
<li>
<a href=https://qutrits.github.io/tags/ title=태그>
<span>태그</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://qutrits.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://qutrits.github.io/posts/>Posts</a></div>
<h1 class=post-title>
[아이템 28] 배열보다는 리스트를 사용하라
</h1>
<div class=post-meta><span title="2020-07-08 14:21:51 +0900 KST">2020년 7월 8일</span>&nbsp;&nbsp;·&nbsp;&nbsp;<span><svg class="svg--time" aria-hidden="true" focusable="false" data-prefix="far" data-icon="clock" role="img" xmlns="http://www.w3.org/2000/svg" width="13.19" height="13.19" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5.0-2e2-89.5-2e2-2e2S145.5 56 256 56s2e2 89.5 2e2 2e2-89.5 2e2-2e2 2e2zm61.8-104.4-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6.0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg> 3 분 소요</span>&nbsp;&nbsp;·&nbsp;&nbsp;Kyungchul Shin&nbsp;&nbsp;|&nbsp;&nbsp;<a href=https://github.com/qutrits/qutrits.github.io/blob/master/content/posts/effective-java-3e/chapter-04/Item28.md rel="noopener noreferrer" target=_blank>수정사항 제안</a>
<ul class=post-tags>
<li><a class=button href=https://qutrits.github.io/tags/java/>Java</a></li>
<li><a class=button href=https://qutrits.github.io/tags/effective-java-3e/>Effective Java 3E</a></li>
</ul></div>
</header>
<div class=series-main>
<div class=chapter-control>
<div class=info>
<div class=chapter-number>4 / 4</div>
<div class=page-button>
<div class=left>
<a class=button href=https://qutrits.github.io/posts/effective-java-3e/chapter-03/item25/><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg><svg style="margin-left:-12px" stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
3 장
</a>
</div>
</div>
</div>
</div>
<h2><a href=https://qutrits.github.io/chapter/effective-java-3e-chapter-4/>Effective Java 3E - 4장 제네릭</a></h2><svg width="32" height="48" fill="none" viewBox="0 0 32 48" class="series-corner-image"><path fill="#12b886" d="M32 0H0v48h.163l16-16L32 47.836V0z"/></svg>
<ol class=series-list>
<li hugo-nav=/posts/effective-java-3e/chapter-04/item26/>
<a href=https://qutrits.github.io/posts/effective-java-3e/chapter-04/item26/>[아이템 26] Raw 타입은 사용하지 마라</a>
</li>
<li hugo-nav=/posts/effective-java-3e/chapter-04/item27/>
<a href=https://qutrits.github.io/posts/effective-java-3e/chapter-04/item27/>[아이템 27] 비검사 경고를 제거하라</a>
</li>
<li hugo-nav=/posts/effective-java-3e/chapter-04/item28/>
<a href=https://qutrits.github.io/posts/effective-java-3e/chapter-04/item28/ class=current>[아이템 28] 배열보다는 리스트를 사용하라</a>
</li>
<li hugo-nav=/posts/effective-java-3e/chapter-04/item29/>
<a href=https://qutrits.github.io/posts/effective-java-3e/chapter-04/item29/>[아이템 29] 이왕이면 제네릭 타입으로 만들라</a>
</li>
<li hugo-nav=/posts/effective-java-3e/chapter-04/item30/>
<a href=https://qutrits.github.io/posts/effective-java-3e/chapter-04/item30/>[아이템 30] 이왕이면 제네릭 메서드로 만들라</a>
</li>
<li hugo-nav=/posts/effective-java-3e/chapter-04/item31/>
<a href=https://qutrits.github.io/posts/effective-java-3e/chapter-04/item31/>[아이템 31] 한정적 와일드카드를 사용해 API 유연성을 높여라</a>
</li>
<li hugo-nav=/posts/effective-java-3e/chapter-04/item32/>
<a href=https://qutrits.github.io/posts/effective-java-3e/chapter-04/item32/>[아이템 32] 제네릭과 가변인수를 함께 쓸 때는 신중하라</a>
</li>
<li hugo-nav=/posts/effective-java-3e/chapter-04/item33/>
<a href=https://qutrits.github.io/posts/effective-java-3e/chapter-04/item33/>[아이템 33] 타입 안전 이종 컨테이너를 고려하라</a>
</li>
</ol>
<div class=series-control>
<div class=toggle onclick='series_toggle(this,"Effective Java 3E Chapter 4")'>🔒</div>
<div class=info>
<div class=series-number>
3 / 8
</div>
<div class=page-button>
<div class=left>
<a class=button href=https://qutrits.github.io/posts/effective-java-3e/chapter-04/item27/><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
</a>
</div>
<div class=right>
<a class=button href=https://qutrits.github.io/posts/effective-java-3e/chapter-04/item29/><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
</a>
</div>
</div>
</div>
</div>
</div>
<script>window.addEventListener('DOMContentLoaded',function(){if(localStorage.getItem("series-main-")==="true"){const a=document.querySelector(".series-main");window.scrollTo(0,a.offsetTop+a.offsetParent.offsetTop-10),localStorage.removeItem("series-main-")}});const seriesToggle=localStorage.getItem("lock-series-Effective Java 3E Chapter 4");seriesToggle==="false"?(document.querySelector(".series-main .series-list").style.display="block",document.querySelector(".series-main .series-control .toggle").innerText="🔓"):(document.querySelector(".series-main .series-list").style.display="none",document.querySelector(".series-main .series-control .toggle").innerText="🔒");const seriesAnchor=[...document.querySelectorAll(".chapter-control .page-button a:not(.disabled)"),...document.querySelectorAll(".series-main .series-list li a"),...document.querySelectorAll(".series-control .page-button a:not(.disabled)")];for(let a=0;a<seriesAnchor.length;a++)seriesAnchor[a].addEventListener("click",a=>{localStorage.setItem("series-main-",!0)})</script>
<div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>목차</span>
</summary>
<div class=inner><ul>
<li>
<a href=#%ec%95%84%ec%9d%b4%ed%85%9c-28-%eb%b0%b0%ec%97%b4%eb%b3%b4%eb%8b%a4%eb%8a%94-%eb%a6%ac%ec%8a%a4%ed%8a%b8%eb%a5%bc-%ec%82%ac%ec%9a%a9%ed%95%98%eb%9d%bc aria-label="[아이템 28] 배열보다는 리스트를 사용하라.">[아이템 28] 배열보다는 리스트를 사용하라.</a><ul>
<li>
<a href=#%eb%b0%b0%ec%97%b4%ea%b3%bc-%ec%a0%9c%eb%84%a4%eb%a6%ad-%ed%83%80%ec%9e%85%ec%9d%98-%ec%b0%a8%ec%9d%b4 aria-label="배열과 제네릭 타입의 차이">배열과 제네릭 타입의 차이</a></li>
<li>
<a href=#%ec%a0%9c%eb%84%a4%eb%a6%ad-%eb%b0%b0%ec%97%b4%ec%9d%84-%eb%a7%8c%eb%93%a4%ec%a7%80-%eb%aa%bb%ed%95%98%ea%b2%8c-%eb%a7%89%ec%9d%80-%ec%9d%b4%ec%9c%a0 aria-label="제네릭 배열을 만들지 못하게 막은 이유">제네릭 배열을 만들지 못하게 막은 이유</a></li></ul>
</li>
<li>
<a href=#%ec%a0%95%eb%a6%ac aria-label=정리>정리</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><h2 id=아이템-28-배열보다는-리스트를-사용하라>[아이템 28] 배열보다는 리스트를 사용하라.<a hidden class=anchor aria-hidden=true href=#아이템-28-배열보다는-리스트를-사용하라>#</a></h2>
<h3 id=배열과-제네릭-타입의-차이>배열과 제네릭 타입의 차이<a hidden class=anchor aria-hidden=true href=#배열과-제네릭-타입의-차이>#</a></h3>
<p>첫번째 차이점. 배열은 공변 입니다. 어려워 보이는 단어지만 뜻은 간단합니다. <code>Sub</code>가 <code>Super</code>의 하위 타입이라면 배열 <code>Sub[]</code>는 배열 <code>Super[]</code>의 하위 타입이 됩니다.<br>
반면, 제네릭은 불공변입니다. 즉 서로 다른 타입 <code>Type1</code>과 <code>Type2</code>가 있을 때, <code>List&lt;Type1></code>은 <code>List&lt;Type2></code>의 하위 타입도 아니고 상위 타입도 아닙니다.</p>
<p>이것만 보면 제네릭에 문제가 있다고 생각할 수 있지만, 사실 문제가 있는 건 배열 쪽입니다. 다음은 문법상 허용되는 코드입니다.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=c1>// 런타임 에러
</span><span class=c1></span><span class=n>Object</span><span class=o>[]</span> <span class=n>objectArray</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Long</span><span class=o>[</span><span class=n>1</span><span class=o>];</span>
<span class=n>objectArray</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>=</span> <span class=s>&#34;타입이 달라 넣을 수 없다.&#34;</span><span class=o>;</span> <span class=c1>// 런타임시 ArrayStoreException을 던진다
</span></code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=c1>// 컴파일 에러
</span><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Object</span><span class=o>&gt;</span> <span class=n>ol</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>Long</span><span class=o>&gt;();</span> <span class=c1>// 호환되지 않는 타입
</span></code></pre></td></tr></table>
</div>
</div><p>어느 쪽이든 Long용 저장소에 String을 넣을 수 없습니다. 다만 배열 같은 경우 런타임에야 알 수 있고, 리스트는 컴파일 시에 알아챌 수 있어서 더 좋습니다.</p>
<p>두번째 차이점. 배열은 실체화(<code>reify</code>)됩니다. 무슨 뜻이냐면 배열은 런타임에도 자신이 담기로 한 원소의 타입을 인지하고 확인합니다. 그래서 위 코드에서 <code>Long</code>배열에 <code>String</code>을 넣으려 하면
<code>ArrayStoreException</code>이 발생합니다. 반면 제네릭은 타입 정보가 런타임에는 소거(<code>erasure</code>)됩니다.<br>
원소 타입을 컴파일타임에만 검사하며 런타임에는 알 수 조차도 없다는 뜻입니다. 소거는 제네릭 지원되기 전의 레거시 코드와 제네릭 타입을 함께 사용할 수 있게 해주는 메커니즘으로, <code>JAVA 5</code>가 제네릭으로 순조롭게 전환될 수 있도록 해주었습니다.</p>
<p>이상의 주요 차이로 인해 배열과 제네릭은 잘 어울러지지 못합니다. 예컨대 배열은 제네릭 타입, 매개변수화 타입, 타입 매개변수로 사용할 수 없습니다. 즉 코드를 <code>new List&lt;E>[]</code>, <code>new List&lt;String>[]</code>, <code>new E[]</code> 식으로 작성하면 컴파일할 때 제네릭 배열 생성 오류를 일으킵니다.</p>
<h3 id=제네릭-배열을-만들지-못하게-막은-이유>제네릭 배열을 만들지 못하게 막은 이유<a hidden class=anchor aria-hidden=true href=#제네릭-배열을-만들지-못하게-막은-이유>#</a></h3>
<p>타입이 안전하지 않기 때문입니다. 이를 허용하면 컴파일러가 자동 생성한 형변환 코드에서 런타임에 <code>ClassCaseException</code>이 발생할 수 있습니다. 런타임에 <code>ClassCaseException</code>이 발생하는 일을 막아주겠다는 제네릭 타입 시스템의 취지에 어긋나는 것입니다.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=c1>// 컴파일 되지 않는다.
</span><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;[]</span> <span class=n>stingLists</span> <span class=o>=</span> <span class=k>new</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;[</span><span class=n>1</span><span class=o>];</span> <span class=c1>// (1)
</span><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>intList</span> <span class=o>=</span> <span class=n>List</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>42</span><span class=o>);</span>             <span class=c1>// (2)
</span><span class=c1></span><span class=n>Object</span><span class=o>[]</span> <span class=n>objects</span> <span class=o>=</span> <span class=n>stingLists</span><span class=o>;</span>                   <span class=c1>// (3)
</span><span class=c1></span><span class=n>Object</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>=</span> <span class=n>intList</span><span class=o>;</span>                             <span class=c1>// (4)
</span><span class=c1></span><span class=n>String</span> <span class=n>s</span> <span class=o>=</span> <span class=n>stingLists</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>get</span><span class=o>(</span><span class=n>0</span><span class=o>);</span>                 <span class=c1>// (5)
</span></code></pre></td></tr></table>
</div>
</div><p>제네릭 배열을 생성하는 <code>(1)</code>이 허용된다고 가정해봅시다. <code>(2)</code>는 원소 하나인 <code>List&lt;Integer></code>를 생성합니다. <code>(3)</code>은 <code>(1)</code>에서 생성한 <code>List&lt;String></code>의 배열을 <code>Object</code> 배열에 할당합니다.<br>
배열은 공변이니 아무 문제가 없습니다. <code>(4)</code>는 <code>(2)</code>에서 생성한 <code>List&lt;Integer></code>의 인스턴스를 <code>Object</code> 배열의 첫 원소로 저장합니다. 제네릭은 소거 방식으로 구현되어서 이 역시 성공합니다.<br>
즉, 런타임에는 <code>List&lt;Integer></code> 소거 방식으로 이 역시 소거됩니다. 즉 런타임에는 <code>List&lt;Integer></code>인스턴스의 타입은 단순히 <code>List</code>가 되고, <code>List&lt;Integer>[]</code> 인스턴스의 타입은 <code>List[]</code>가 됩니다. 따라서 <code>(4)</code>에서도 <code>ArrayStoreException</code>을 발생시키지 않습니다.</p>
<p>문제는 <code>List&lt;String></code>인스턴스만 담겠다고 선언한 <code>stingLists</code> 배열에는 지금 <code>List&lt;Inrteger></code> 인스턴스가 저장돼 있습니다. 결국 <code>(5)</code>에서 <code>ClassCaseExceptionn</code>이 발생하게 됩니다.
이런 일을 방지하려면 (제네릭 배열이 생성되지 않도록) <code>(1)</code>에서 컴파일 오류를 발생해야 합니다.</p>
<p><code>E</code>, <code>List&lt;E></code>, <code>List&lt;String></code> 같은 타입을 실체화 불가 타입(<code>non-reifiable type</code>)이라 합니다. 쉽게 말하자면, 실체화되지 않아서 런타임에는 컴파일타임보다 타입 정보를 적게 가지는 타입입니다. 소거 메커니즘 때문에 매개변수화 타입 가운데 실체화될 수 있는 타입은 <code>List&lt;?></code>와 <code>Map&lt;?, ?></code>같은 비한정적 와일드카드 타입뿐입니다. 배열을 비한정적 와일드카드 타입으로 만들 수는 있지만, 유용하게 쓰일 일은 별로 없습니다.</p>
<h2 id=정리>정리<a hidden class=anchor aria-hidden=true href=#정리>#</a></h2>
<ul>
<li>배열은 공변이고 실체화가 되지만 제네릭은 불공변이고 타입 정보가 소거됩니다.</li>
<li>배열은 런타임에는 타입 안전하지만 컴파일타임에는 그렇지 않습니다.</li>
</ul>
</div>
<footer class=post-footer><div class=post-license-info>
<a rel=license href=https://creativecommons.org/licenses/by-sa/4.0/deed.ko target=_blank>
<img alt="크리에이티브 커먼즈 라이선스" src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png>
</a>
<div class=license-descript>
이 저작물은 <a rel=license href=https://creativecommons.org/licenses/by-sa/4.0/deed.ko target=_blank>크리에이티브 커먼즈 저작자표시-동일조건변경허락 4.0 국제 라이선스</a>에 따라 이용할 수 있습니다.
</div>
</div>
<ul class=post-tags>
<li><a class=button href=https://qutrits.github.io/tags/java/>Java</a></li>
<li><a class=button href=https://qutrits.github.io/tags/effective-java-3e/>Effective Java 3E</a></li>
</ul>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" class=twitter aria-label="share [아이템 28] 배열보다는 리스트를 사용하라 on twitter" href="https://twitter.com/intent/tweet/?text=%5b%ec%95%84%ec%9d%b4%ed%85%9c%2028%5d%20%eb%b0%b0%ec%97%b4%eb%b3%b4%eb%8b%a4%eb%8a%94%20%eb%a6%ac%ec%8a%a4%ed%8a%b8%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%98%eb%9d%bc&url=https%3a%2f%2fqutrits.github.io%2fposts%2feffective-java-3e%2fchapter-04%2fitem28%2f&hashtags=Java%2cEffectiveJava3E"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" class=linkedin aria-label="share [아이템 28] 배열보다는 리스트를 사용하라 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fqutrits.github.io%2fposts%2feffective-java-3e%2fchapter-04%2fitem28%2f&title=%5b%ec%95%84%ec%9d%b4%ed%85%9c%2028%5d%20%eb%b0%b0%ec%97%b4%eb%b3%b4%eb%8b%a4%eb%8a%94%20%eb%a6%ac%ec%8a%a4%ed%8a%b8%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%98%eb%9d%bc&summary=%5b%ec%95%84%ec%9d%b4%ed%85%9c%2028%5d%20%eb%b0%b0%ec%97%b4%eb%b3%b4%eb%8b%a4%eb%8a%94%20%eb%a6%ac%ec%8a%a4%ed%8a%b8%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%98%eb%9d%bc&source=https%3a%2f%2fqutrits.github.io%2fposts%2feffective-java-3e%2fchapter-04%2fitem28%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" class=reddit aria-label="share [아이템 28] 배열보다는 리스트를 사용하라 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fqutrits.github.io%2fposts%2feffective-java-3e%2fchapter-04%2fitem28%2f&title=%5b%ec%95%84%ec%9d%b4%ed%85%9c%2028%5d%20%eb%b0%b0%ec%97%b4%eb%b3%b4%eb%8b%a4%eb%8a%94%20%eb%a6%ac%ec%8a%a4%ed%8a%b8%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%98%eb%9d%bc"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" class=facebook aria-label="share [아이템 28] 배열보다는 리스트를 사용하라 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fqutrits.github.io%2fposts%2feffective-java-3e%2fchapter-04%2fitem28%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" class=whatsapp aria-label="share [아이템 28] 배열보다는 리스트를 사용하라 on whatsapp" href="https://api.whatsapp.com/send?text=%5b%ec%95%84%ec%9d%b4%ed%85%9c%2028%5d%20%eb%b0%b0%ec%97%b4%eb%b3%b4%eb%8b%a4%eb%8a%94%20%eb%a6%ac%ec%8a%a4%ed%8a%b8%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%98%eb%9d%bc%20-%20https%3a%2f%2fqutrits.github.io%2fposts%2feffective-java-3e%2fchapter-04%2fitem28%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" class=telegram aria-label="share [아이템 28] 배열보다는 리스트를 사용하라 on telegram" href="https://telegram.me/share/url?text=%5b%ec%95%84%ec%9d%b4%ed%85%9c%2028%5d%20%eb%b0%b0%ec%97%b4%eb%b3%b4%eb%8b%a4%eb%8a%94%20%eb%a6%ac%ec%8a%a4%ed%8a%b8%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%98%eb%9d%bc&url=https%3a%2f%2fqutrits.github.io%2fposts%2feffective-java-3e%2fchapter-04%2fitem28%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//https-qutrits-github-io.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://qutrits.github.io/>&lt;Qutrits/></a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
    <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
<span>
· Source code on
<a href=https://github.com/qutrits/qutrits.github.io rel="noopener noreferrer" target=_blank>GitHub</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentcolor"><path d="M414 321.94 274.22 158.82a24 24 0 00-36.44.0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5.0 31.56-24.05 18.18-39.62z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"auto"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerHTML='\u003cspan class=\u0022octicon\u0022\u003e\u003csvg aria-hidden=\u0022true\u0022 height=\u002216\u0022 viewBox=\u00220 0 16 16\u0022 version=\u00221.1\u0022 width=\u002216\u0022 data-view-component=\u0022true\u0022 class=\u0022octicon-copy\u0022\u003e\u003cpath fill-rule=\u0022evenodd\u0022 d=\u0022M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z\u0022\u003e\u003c/path\u003e\u003cpath fill-rule=\u0022evenodd\u0022 d=\u0022M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z\u0022\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/span\u003e';function d(){a.classList.add('done'),a.innerHTML='\u003cdiv class=\u0022tooltip\u0022\u003eCopied!\u003c/div\u003e\u003cspan class=\u0022octicon done\u0022 style=\u0022color:#3fb950;\u0022\u003e\u003csvg aria-hidden=\u0022true\u0022 height=\u002216\u0022 viewBox=\u00220 0 16 16\u0022 version=\u00221.1\u0022 width=\u002216\u0022 data-view-component=\u0022true\u0022 class=\u0022octicon-check\u0022\u003e\u003cpath fill-rule=\u0022evenodd\u0022 d=\u0022M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z\u0022\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/span\u003e',setTimeout(()=>{a.classList.remove('done'),a.innerHTML='\u003cspan class=\u0022octicon\u0022\u003e\u003csvg aria-hidden=\u0022true\u0022 height=\u002216\u0022 viewBox=\u00220 0 16 16\u0022 version=\u00221.1\u0022 width=\u002216\u0022 data-view-component=\u0022true\u0022 class=\u0022octicon-copy\u0022\u003e\u003cpath fill-rule=\u0022evenodd\u0022 d=\u0022M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z\u0022\u003e\u003c/path\u003e\u003cpath fill-rule=\u0022evenodd\u0022 d=\u0022M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z\u0022\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/span\u003e'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>