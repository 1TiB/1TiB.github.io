if(window.location.pathname.startsWith("/posts/")){function series_toggle(b,c){const a=document.querySelector(".post-single .series-main .series-list");a.style.display==="none"||a.style.display===""?(localStorage.setItem("lock-series-"+c,!1),b.innerText="🔓",a.style.display="block"):a.style.display==="block"&&(localStorage.setItem("lock-series-"+c,!0),b.innerText="🔒",a.style.display="none")}const b=document.querySelector(".main .post-single>.toc");let a=[];const c=function(a){document.readyState==="interactive"||document.readyState==="complete"?a():document.addEventListener("DOMContentLoaded",a)};c(function(){const f=b?b.offsetTop+b.offsetParent.offsetTop-1:0,d=document.querySelector("header.header"),e=document.querySelector(".main .toc");if(e!==null){const b=e.cloneNode(!0);b.classList.add("aside");const g=b.querySelectorAll(".inner ul>li");for(let b=0;b<g.length;b++)a[b]=decodeURI(g[b].firstElementChild.hash.substring(1));f<window.pageYOffset?b.classList.add("reveal"):f>=window.pageYOffset&&b.classList.add("hide");const h=b.querySelector("details summary .details"),c=document.createElement("span");let d=null;localStorage.getItem("lock-aside-toc-"+window.location.pathname)==="true"?(b.querySelector("details").removeAttribute("open"),d=document.createTextNode("🔒")):(b.querySelector("details").setAttribute("open",""),d=document.createTextNode("🔓")),c.appendChild(d),c.classList.add("tocLock"),h.prepend(c),b.querySelector("details summary").addEventListener("click",a=>{a.target.querySelector(".tocLock")===null?a.target.innerText==="🔓"?(localStorage.setItem("lock-aside-toc-"+window.location.pathname,!0),a.target.innerText="🔒"):(localStorage.setItem("lock-aside-toc-"+window.location.pathname,!1),a.target.innerText="🔓"):a.target.querySelector(".tocLock").innerText==="🔓"?(localStorage.setItem("lock-aside-toc-"+window.location.pathname,!0),a.target.querySelector(".tocLock").innerText="🔒"):(localStorage.setItem("lock-aside-toc-"+window.location.pathname,!1),a.target.querySelector(".tocLock").innerText="🔓")}),e.parentNode.insertBefore(b,e.nextSibling)}const c=document.querySelector(".main .toc.aside"),g="scroll-up",h="scroll-down";let i=null,j=null,k=0;window.addEventListener("scroll",()=>{const b=window.pageYOffset;if(e!==null&&f>=b&&c.classList.contains("reveal")&&(c.scrollTop=0,c.classList.remove("reveal"),c.classList.add("hide")),b<=0&&!d.classList.contains(g)){d.classList.remove(h),d.classList.add(g);return}if(b<=10){d.classList.remove(g);return}if(b>80&&(b>k&&!d.classList.contains(h)?(d.classList.remove(g),d.classList.add(h)):b<k&&d.classList.contains(h)&&(d.classList.remove(h),d.classList.add(g))),e!==null){f<b&&c.classList.contains("hide")?(c.classList.remove("hide"),c.classList.add("reveal")):f>=b&&c.classList.contains("reveal")&&(c.scrollTop=0,c.classList.remove("reveal"),c.classList.add("hide"));const d=c.querySelectorAll(".inner ul>li");let e=null,g=null;if(a.map((c,a)=>{g=document.getElementById(c),g.offsetTop+g.offsetParent.offsetTop-1<=b&&(i=d[a],e=a)}),e!==null){let f=Math.ceil(b+window.innerHeight)>=document.body.scrollHeight;if(f){for(let a=0;a<d.length;a++){if(!d[a].classList.contains("selected"))continue;d[a].classList.remove("selected")}d[a.length-1].classList.add("selected"),j=d[a.length-1]}else{if(i===j&&e>0)return;for(let a=0;a<d.length;a++){if(!d[a].classList.contains("selected"))continue;d[a].classList.remove("selected")}i.classList.add("selected"),j=i}e!==null&&c.scroll({behavior:'smooth',top:e*20})}else{if(c.querySelector(".selected")===null)return;for(let a=0;a<d.length;a++){if(!d[a].classList.contains("selected"))continue;d[a].classList.remove("selected")}}}k=b});const l=document.querySelector(".main .toc.aside details");if(l!==null){const b=new MutationObserver((b,d)=>{if(b[0].oldValue!==null)return;for(let b=0;b<a.length;b++){let e=document.getElementById(a[b]),d=document.getElementById(a[b+1]);if(d!==null&&window.pageYOffset>=e.offsetTop+e.offsetParent.offsetTop-1&&window.pageYOffset<d.offsetTop+d.offsetParent.offsetTop-1){let d=Math.ceil(window.pageYOffset+window.innerHeight)>=document.body.scrollHeight;c.querySelectorAll(".inner ul>li")[b+1].classList.contains("selected")&&c.querySelectorAll(".inner ul>li")[b+1].classList.remove("selected"),d?(c.querySelectorAll(".inner ul>li")[a.length-1].classList.add("selected"),c.scrollTop=(a.length-1)*20):(c.querySelectorAll(".inner ul>li")[b].classList.add("selected"),c.scrollTop=b*20)}}});b.observe(l,{attributes:!0,attributeOldValue:!0,attributeFilter:["open"]})}}),window.onload=function(){if(window.innerWidth<769){const a=document.querySelectorAll(".post-content .highlight td:nth-child(2) pre code.hljs");setTimeout(()=>{for(let b=0;b<a.length;b++)a[b].style.width="200%",a[b].style.width="100%"},500)}const c=b?b.offsetTop+b.offsetParent.offsetTop-1:0;if(c<window.pageYOffset){const b=document.querySelectorAll(".main .toc.aside .inner ul>li");for(let c=0;c<a.length;c++){let e=document.getElementById(a[c]),d=document.getElementById(a[c+1]);d!==null&&window.pageYOffset>=e.offsetTop+e.offsetParent.offsetTop-1&&window.pageYOffset<d.offsetTop+d.offsetParent.offsetTop-1&&(b[c+1]!==null&&b[c+1].classList.remove("selected"),b[c].classList.add("selected"),document.querySelector(".main .toc.aside").scrollTop=c*20)}}}}else if(window.location.pathname.startsWith("/archives/"))function archives_toggle(a,d){const b=document.getElementById(a),c=d.querySelector(".toggle");b.style.display==="none"||b.style.display===""?(console.log("lock-archives-"+a),localStorage.setItem("lock-archives-"+a,!1),c.innerText="📂",b.style.display="block"):b.style.display==="block"&&(console.log("lock-archives-"+a),localStorage.setItem("lock-archives-"+a,!0),c.innerText="📁",b.style.display="none")}