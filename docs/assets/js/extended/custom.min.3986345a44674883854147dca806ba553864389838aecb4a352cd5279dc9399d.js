const DOMReady=function(a){document.readyState==="interactive"||document.readyState==="complete"?a():document.addEventListener("DOMContentLoaded",a)};function sleep(a){return new Promise(b=>setTimeout(b,a))}window.innerWidth<769?document.getElementById("menu").classList.contains("hidden")||(document.getElementById("menu").classList.add("hidden"),document.getElementById("menu").classList.remove("reveal")):document.getElementById("menu").classList.contains("hidden")&&(document.getElementById("menu").classList.add("reveal"),document.getElementById("menu").classList.remove("hidden")),window.addEventListener('resize',function(){window.innerWidth<769?document.getElementById("menu").classList.contains("hidden")||(document.getElementById("menu").classList.add("hidden"),document.getElementById("menu").classList.remove("reveal")):document.getElementById("menu").classList.contains("hidden")&&(document.getElementById("menu").classList.add("reveal"),document.getElementById("menu").classList.remove("hidden"))},!0),document.getElementById("menu-trigger").addEventListener("click",()=>{window.innerWidth<769&&(document.getElementById("menu").classList.contains("hidden")?(document.getElementById("menu").classList.add("reveal"),document.getElementById("menu").classList.remove("hidden")):(document.getElementById("menu").classList.add("hidden"),document.getElementById("menu").classList.remove("reveal")))});let urlPathName="",urlContryCode="";if(window.location.pathname.match(/^\/.{2}\//)){let a=window.location.pathname.match(/^\/(.{2})(\/.*)$/);urlContryCode=a[1],urlPathName=a[2]}else urlPathName=window.location.pathname;DOMReady(function(){if(urlPathName.match(/^\/posts\/.+/)){const c=urlPathName.match(/^(\/posts\/)([^/]+)/);if(c[2]!=="page"){const m="scroll-up",o="scroll-down",p="header-bottom";let e=0;const f=document.querySelector("header.header"),q=document.querySelector(".main .post-single>.toc"),j=q?q.offsetTop+q.offsetParent.offsetTop-1:0,k=document.querySelector(".post-header"),l=[];f.style.borderBottom="none";function a(){let a=u.scrollHeight-b(r)-window.innerHeight,c=e,d=c/a*100;r.style.width=d+"%"}function b(a){var e=a.offsetHeight,b=document.body.offsetHeight,c=a.getBoundingClientRect(),d=c.top,f=c.bottom;return Math.max(0,d>0?Math.min(e,b-d):Math.min(f,b))}const u=document.querySelector("html"),v=document.querySelector("body"),s=document.createElement("div");s.classList.add("progress-bar-container__progress"),v.prepend(s);const r=document.querySelector(".progress-bar-container__progress"),t={childList:!0,subtree:!0,characterData:!0,attributes:!0};new MutationObserver(a).observe(r,t);const d=document.querySelector(".main .toc-aside");let g=null,i=null,h=null,c=null;if(d){g=document.querySelector(".main .toc-aside-summary"),i=d.querySelector(".inner-wrapper"),h=g.querySelector(".toggle"),c=d.querySelectorAll(".inner-wrapper .inner ul>li"),localStorage.getItem("lock-aside-toc-"+urlPathName)==="true"?(g.dataset.isLock=!0,i.classList.add("close"),h.querySelector(".unlock").classList.add("hide")):(g.dataset.isLock=!1,i.classList.add("open"),h.querySelector(".lock").classList.add("hide"));for(let a=0;a<c.length;a++)l[a]=decodeURI(c[a].firstElementChild.hash.substring(1));j===0&&(j=k.offsetHeight+k.offsetTop+k.offsetParent.offsetTop-1),j<window.pageYOffset?(d.classList.remove("hide"),d.classList.add("reveal"),g.classList.remove("hide")):j>=window.pageYOffset&&d.classList.add("hide"),g.addEventListener("click",()=>{g.dataset.isLock==="false"?(g.dataset.isLock=!0,localStorage.setItem("lock-aside-toc-"+urlPathName,!0),h.querySelector(".lock").classList.remove("hide"),h.querySelector(".unlock").classList.add("hide"),i.classList.add("close"),i.classList.remove("open")):(g.dataset.isLock=!1,localStorage.setItem("lock-aside-toc-"+urlPathName,!1),h.querySelector(".lock").classList.add("hide"),h.querySelector(".unlock").classList.remove("hide"),i.classList.add("open"),i.classList.remove("close"))})}let n=0;window.addEventListener("scroll",()=>{e=window.pageYOffset,a(),e<=0?(!f.classList.contains(m)||f.classList.contains(p))&&(f.classList.remove(p),f.classList.remove(o),f.classList.add(m)):f.classList.contains(p)||f.classList.add(p);const b=k.offsetHeight+k.offsetTop+k.offsetParent.offsetTop-1;if(e>b&&(e>n?f.classList.contains(m)&&(f.classList.remove(m),f.classList.add(o),document.getElementById("menu").classList.contains("reveal")&&(document.getElementById("menu").classList.remove("reveal"),document.getElementById("menu").classList.add("hidden"))):e<n&&f.classList.contains(o)&&(f.classList.remove(o),f.classList.add(m))),d){const h=Math.ceil(e+window.innerHeight)>=document.body.scrollHeight;j<e&&d.classList.contains("hide")?(d.classList.remove("hide"),d.classList.add("reveal"),g.classList.remove("hide")):j>=e&&d.classList.contains("reveal")&&(d.scrollTop=0,d.classList.remove("reveal"),d.classList.add("hide"),g.classList.add("hide"));let b=null,f=null,a=null,i=null;if(l.map((f,d)=>{i=document.getElementById(f);const g=i.getBoundingClientRect(),h=g.top;e+h-1<=e&&(b=c[d],a=d)}),a!==null){if(h){for(let a=0;a<c.length;a++){if(!c[a].classList.contains("selected"))continue;c[a].classList.remove("selected")}c[l.length-1].classList.add("selected"),f=c[l.length-1]}else{if(b===f&&a>0){n=e;return}for(let a=0;a<c.length;a++){if(!c[a].classList.contains("selected"))continue;c[a].classList.remove("selected")}b.classList.add("selected"),f=b}a!==null&&d.scroll({behavior:'smooth',top:a*20})}else if(h)c[l.length-1].classList.add("selected"),f=c[l.length-1];else{if(d.querySelector(".selected")===null){n=e;return}for(let a=0;a<c.length;a++){if(!c[a].classList.contains("selected"))continue;c[a].classList.remove("selected")}}}n=e}),window.onload=function(){const a=document.querySelectorAll(".post-content .highlight td:nth-child(2) pre code.hljs");for(let b=0;b<a.length;b++)a[b].style.width="100%"}}}else urlPathName.match(/^\/archives\/$/)||urlPathName.match(/^\/tags\/$/)||urlPathName.match(/^\/categories\/$/)||urlPathName.match(/^\/series\/$/)||urlPathName.match(/^\/chapter\/$/)||urlPathName.match(/^\/posts\/$/)||urlPathName.match(/^\/tags\/.+/)||urlPathName.match(/^\/categories\/.+/)||urlPathName.match(/^\/series\/.+/)||urlPathName.match(/^\/chapter\/.+/)||urlPathName.match(/^\/search\/$/)||urlPathName.match(/^\/series-list\/$/)||urlPathName.match(/^\/collection\/$/)||urlPathName==="/"||urlPathName.match(/^\/links\/$/)})