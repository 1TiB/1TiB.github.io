if(window.location.pathname.startsWith("/posts/")){function series_toggle(b,c){const a=document.querySelector(".post-single .series-main .series-list");a.style.display==="none"||a.style.display===""?(localStorage.setItem("lock-series-"+c,!1),b.innerText="🔓",a.style.display="block"):a.style.display==="block"&&(localStorage.setItem("lock-series-"+c,!0),b.innerText="🔒",a.style.display="none")}const f="scroll-up",i="scroll-down",e="header-bottom";let g=null,h=null,d=0,a=0;document.querySelector("header.header").style.borderBottom="none";const c=document.querySelector(".main .post-single>.toc"),j=document.querySelector(".main .toc.aside details");let b=[];const k=function(a){document.readyState==="interactive"||document.readyState==="complete"?a():document.addEventListener("DOMContentLoaded",a)};k(function(){const n=c?c.offsetTop+c.offsetParent.offsetTop-1:0,l=document.querySelector("header.header"),m=document.querySelector(".main .toc");function p(){let b=r.scrollHeight-u(o)-window.innerHeight,c=a,d=c/b*100;o.style.width=d+"%"}function u(a){var e=a.offsetHeight,b=document.body.offsetHeight,c=a.getBoundingClientRect(),d=c.top,f=c.bottom;return Math.max(0,d>0?Math.min(e,b-d):Math.min(f,b))}const r=document.querySelector("html"),s=document.querySelector("body"),q=document.createElement("div");q.classList.add("progress-bar-container__progress"),s.prepend(q);const o=document.querySelector(".progress-bar-container__progress");var t={childList:!0,subtree:!0,characterData:!0,attributes:!0};if(new MutationObserver(p).observe(o,t),m!==null){const a=m.cloneNode(!0);a.classList.add("aside");const e=a.querySelectorAll(".inner ul>li");for(let a=0;a<e.length;a++)b[a]=decodeURI(e[a].firstElementChild.hash.substring(1));n<window.pageYOffset?a.classList.add("reveal"):n>=window.pageYOffset&&a.classList.add("hide");const f=a.querySelector("details summary .details"),c=document.createElement("span");let d=null;localStorage.getItem("lock-aside-toc-"+window.location.pathname)==="true"?(a.querySelector("details").removeAttribute("open"),d=document.createTextNode("🔒")):(a.querySelector("details").setAttribute("open",""),d=document.createTextNode("🔓")),c.appendChild(d),c.classList.add("tocLock"),f.prepend(c),a.querySelector("details summary").addEventListener("click",a=>{a.target.querySelector(".tocLock")===null?a.target.innerText==="🔓"?(localStorage.setItem("lock-aside-toc-"+window.location.pathname,!0),a.target.innerText="🔒"):(localStorage.setItem("lock-aside-toc-"+window.location.pathname,!1),a.target.innerText="🔓"):a.target.querySelector(".tocLock").innerText==="🔓"?(localStorage.setItem("lock-aside-toc-"+window.location.pathname,!0),a.target.querySelector(".tocLock").innerText="🔒"):(localStorage.setItem("lock-aside-toc-"+window.location.pathname,!1),a.target.querySelector(".tocLock").innerText="🔓")}),m.parentNode.insertBefore(a,m.nextSibling)}const k=document.querySelector(".main .toc.aside");if(window.addEventListener("scroll",()=>{if(a=window.pageYOffset,p(),a<=0){if(!l.classList.contains(f)||l.classList.contains(e)){l.classList.remove(e),l.classList.remove(i),l.classList.add(f);return}}else l.classList.contains(e)||l.classList.add(e);const c=document.querySelector(".post-content");if(a>c.offsetTop+c.offsetParent.offsetTop-1&&(a>d?(l.classList.remove(f),l.classList.add(i)):a<d&&(l.classList.remove(i),l.classList.add(f))),m!==null){n<a&&k.classList.contains("hide")?(k.classList.remove("hide"),k.classList.add("reveal")):n>=a&&k.classList.contains("reveal")&&(k.scrollTop=0,k.classList.remove("reveal"),k.classList.add("hide"));const c=k.querySelectorAll(".inner ul>li");let e=null,f=null;if(b.map((d,b)=>{f=document.getElementById(d),f.offsetTop+f.offsetParent.offsetTop-1<=a&&(g=c[b],e=b)}),e!==null){let f=Math.ceil(a+window.innerHeight)>=document.body.scrollHeight;if(f){for(let a=0;a<c.length;a++){if(!c[a].classList.contains("selected"))continue;c[a].classList.remove("selected")}c[b.length-1].classList.add("selected"),h=c[b.length-1]}else{if(g===h&&e>0){d=a;return}for(let a=0;a<c.length;a++){if(!c[a].classList.contains("selected"))continue;c[a].classList.remove("selected")}g.classList.add("selected"),h=g}e!==null&&k.scroll({behavior:'smooth',top:e*20})}else{if(k.querySelector(".selected")===null){d=a;return}for(let a=0;a<c.length;a++){if(!c[a].classList.contains("selected"))continue;c[a].classList.remove("selected")}}}d=a}),j!==null){const a=new MutationObserver((a,c)=>{if(a[0].oldValue!==null)return;for(let a=0;a<b.length;a++){let d=document.getElementById(b[a]),c=document.getElementById(b[a+1]);if(c!==null&&window.pageYOffset>=d.offsetTop+d.offsetParent.offsetTop-1&&window.pageYOffset<c.offsetTop+c.offsetParent.offsetTop-1){let c=Math.ceil(window.pageYOffset+window.innerHeight)>=document.body.scrollHeight;k.querySelectorAll(".inner ul>li")[a+1].classList.contains("selected")&&k.querySelectorAll(".inner ul>li")[a+1].classList.remove("selected"),c?(k.querySelectorAll(".inner ul>li")[b.length-1].classList.add("selected"),k.scrollTop=(b.length-1)*20):(k.querySelectorAll(".inner ul>li")[a].classList.add("selected"),k.scrollTop=a*20)}}});a.observe(j,{attributes:!0,attributeOldValue:!0,attributeFilter:["open"]})}}),window.onload=function(){const a=document.querySelectorAll(".post-content .highlight td:nth-child(2) pre code.hljs");for(let b=0;b<a.length;b++)a[b].style.width="100%";const d=c?c.offsetTop+c.offsetParent.offsetTop-1:0;if(d<window.pageYOffset){const a=document.querySelectorAll(".main .toc.aside .inner ul>li");for(let c=0;c<b.length;c++){let e=document.getElementById(b[c]),d=document.getElementById(b[c+1]);d!==null&&window.pageYOffset>=e.offsetTop+e.offsetParent.offsetTop-1&&window.pageYOffset<d.offsetTop+d.offsetParent.offsetTop-1&&(a[c+1]!==null&&a[c+1].classList.remove("selected"),a[c].classList.add("selected"),document.querySelector(".main .toc.aside").scrollTop=c*20)}}}}else if(window.location.pathname.startsWith("/archives/"))function archives_toggle(b,d){const a=document.getElementById(b),c=d.querySelector(".toggle");a.style.display==="none"||a.style.display===""?(localStorage.setItem("lock-archives-"+b,!1),c.innerText="📂",a.style.display="block"):a.style.display==="block"&&(localStorage.setItem("lock-archives-"+b,!0),c.innerText="📁",a.style.display="none")}