window.location.pathname.startsWith("/post/")&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main .post-single>.toc").offsetTop,s=document.querySelector(".main .toc"),l=[];if(null!==s){const t=s.cloneNode(!0);t.classList.add("aside"),t.querySelector("details").setAttribute("open","");const o=t.querySelectorAll(".inner ul>li");for(let e=0;e<o.length;e++)o[e].classList.contains("non-selected")||(o[e].classList.add("non-selected"),l[e]=decodeURI(o[e].querySelector("a").getAttribute("href")));e<window.pageYOffset?t.classList.add("reveal"):e>=window.pageYOffset&&t.classList.add("hide"),s.parentNode.insertBefore(t,s.nextSibling)}let t=0;const o=document.querySelector("header.header");let c=null,n=null;window.addEventListener("scroll",()=>{const i=window.pageYOffset;if(i<=0&&!o.classList.contains("scroll-up"))return o.classList.remove("scroll-down"),void o.classList.add("scroll-up");if(i<=10)o.classList.remove("scroll-up");else{if(i>80&&(i>t&&!o.classList.contains("scroll-down")?(o.classList.remove("scroll-up"),o.classList.add("scroll-down")):i<t&&o.classList.contains("scroll-down")&&(o.classList.remove("scroll-down"),o.classList.add("scroll-up"))),null!==s){const s=document.querySelector(".main .toc.aside");e<i&&s.classList.contains("hide")?(s.classList.remove("hide"),s.classList.add("reveal")):e>=i&&s.classList.contains("reveal")&&(s.scrollTop=0,s.classList.remove("reveal"),s.classList.add("hide"));const t=s.querySelectorAll(".inner ul>li");let o=null;for(let e=0;e<l.length;e++){document.querySelector(l[e]).offsetTop<=i&&(c=t[e],o=e)}if(null!==o){if(Math.ceil(i+window.innerHeight)>=document.body.scrollHeight){for(let e=0;e<t.length;e++)t[e].classList.contains("selected")&&t[e].classList.remove("selected");t[l.length-1].classList.add("selected"),n=t[l.length-1]}else{if(null!==c&&null!==n&&c===n)return;for(let e=0;e<t.length;e++)t[e].classList.contains("selected")&&t[e].classList.remove("selected");c.classList.add("selected"),n=c}null!==o&&s.scroll({behavior:"smooth",top:20*o})}else{if(null===s.querySelector(".selected"))return;for(let e=0;e<t.length;e++)t[e].classList.contains("selected")&&t[e].classList.remove("selected")}}t=i}})});