if(window.location.pathname.startsWith("/post/")){let e=null;document.addEventListener("DOMContentLoaded",()=>{const s=document.querySelector(".main .post-single>.toc"),t=s?s.offsetTop:0,l=document.querySelector("header.header"),o=document.querySelector(".main .toc"),c=[];if(null!==o){const s=o.cloneNode(!0);s.classList.add("aside"),s.querySelector("details").setAttribute("open","");const l=s.querySelectorAll(".inner ul>li");for(let e=0;e<l.length;e++)l[e].classList.contains("non-selected")||(l[e].classList.add("non-selected"),c[e]=decodeURI(l[e].querySelector("a").getAttribute("href")));if(t<window.pageYOffset?s.classList.add("reveal"):t>=window.pageYOffset&&s.classList.add("hide"),o.parentNode.insertBefore(s,o.nextSibling),t<window.pageYOffset){const s=document.querySelectorAll(".main .toc.aside .inner ul>li");for(let t=0;t<c.length;t++){let l=document.querySelector(c[t+1]),o=document.querySelector(c[t]);window.pageYOffset>=o.offsetTop&&window.pageYOffset<l.offsetTop&&(s[t].classList.add("selected"),e=t)}}}const n=document.querySelector(".main .toc.aside");let i=null,r=null,a=0;window.addEventListener("scroll",()=>{const e=window.pageYOffset;if(null!==o&&t>=e&&n.classList.contains("reveal")&&(n.scrollTop=0,n.classList.remove("reveal"),n.classList.add("hide")),e<=0&&!l.classList.contains("scroll-up"))return l.classList.remove("scroll-down"),void l.classList.add("scroll-up");if(e<=10)l.classList.remove("scroll-up");else{if(e>80&&(e>a&&!l.classList.contains("scroll-down")?(l.classList.remove("scroll-up"),l.classList.add("scroll-down")):e<a&&l.classList.contains("scroll-down")&&(l.classList.remove("scroll-down"),l.classList.add("scroll-up"))),null!==o){t<e&&n.classList.contains("hide")?(n.classList.remove("hide"),n.classList.add("reveal")):t>=e&&n.classList.contains("reveal")&&(n.scrollTop=0,n.classList.remove("reveal"),n.classList.add("hide"));const s=n.querySelectorAll(".inner ul>li");let l=null;for(let t=0;t<c.length;t++){document.querySelector(c[t]).offsetTop<=e&&(i=s[t],l=t)}if(null!==l){if(Math.ceil(e+window.innerHeight)>=document.body.scrollHeight){for(let e=0;e<s.length;e++)s[e].classList.contains("selected")&&s[e].classList.remove("selected");s[c.length-1].classList.add("selected"),r=s[c.length-1]}else{if(i===r&&l>0)return;for(let e=0;e<s.length;e++)s[e].classList.contains("selected")&&s[e].classList.remove("selected");i.classList.add("selected"),r=i}null!==l&&n.scroll({behavior:"smooth",top:20*l})}else{if(null===n.querySelector(".selected"))return;for(let e=0;e<s.length;e++)s[e].classList.contains("selected")&&s[e].classList.remove("selected")}}a=e}});const d=document.querySelector(".main .toc.aside details");if(null!==d){new MutationObserver((e,s)=>{if(null===e[0].oldValue)for(let e=0;e<c.length;e++){let s=document.querySelector(c[e+1]),t=document.querySelector(c[e]);window.pageYOffset>=t.offsetTop&&window.pageYOffset<s.offsetTop&&(n.querySelectorAll(".inner ul>li")[e].classList.add("selected"),n.scrollTop=20*e)}}).observe(d,{attributes:!0,attributeOldValue:!0,attributeFilter:["open"]})}}),window.onload=function(){null!==e&&(document.querySelector(".main .toc.aside").scrollTop=20*e)}}