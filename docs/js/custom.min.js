if(window.location.pathname.startsWith("/post/")){let e=null;document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".main .post-single>.toc"),l=t?t.offsetTop:0,s=document.querySelector("header.header"),o=document.querySelector(".main .toc"),n=[];if(null!==o){const t=o.cloneNode(!0);t.classList.add("aside"),t.querySelector("details").setAttribute("open","");const s=t.querySelectorAll(".inner ul>li");for(let e=0;e<s.length;e++)s[e].classList.contains("non-selected")||(s[e].classList.add("non-selected"),n[e]=decodeURI(s[e].querySelector("a").getAttribute("href").substring(1)));if(l<window.pageYOffset?t.classList.add("reveal"):l>=window.pageYOffset&&t.classList.add("hide"),o.parentNode.insertBefore(t,o.nextSibling),l<window.pageYOffset){const t=document.querySelectorAll(".main .toc.aside .inner ul>li");for(let l=0;l<n.length;l++){let s=document.getElementById(n[l+1]),o=document.getElementById(n[l]);window.pageYOffset>=o.offsetTop&&window.pageYOffset<s.offsetTop&&(t[l].classList.add("selected"),e=l)}}}const c=document.querySelector(".main .toc.aside");let i=null,d=null,a=0;window.addEventListener("scroll",()=>{const e=window.pageYOffset;if(null!==o&&l>=e&&c.classList.contains("reveal")&&(c.scrollTop=0,c.classList.remove("reveal"),c.classList.add("hide")),e<=0&&!s.classList.contains("scroll-up"))return s.classList.remove("scroll-down"),void s.classList.add("scroll-up");if(e<=10)s.classList.remove("scroll-up");else{if(e>80&&(e>a&&!s.classList.contains("scroll-down")?(s.classList.remove("scroll-up"),s.classList.add("scroll-down")):e<a&&s.classList.contains("scroll-down")&&(s.classList.remove("scroll-down"),s.classList.add("scroll-up"))),null!==o){l<e&&c.classList.contains("hide")?(c.classList.remove("hide"),c.classList.add("reveal")):l>=e&&c.classList.contains("reveal")&&(c.scrollTop=0,c.classList.remove("reveal"),c.classList.add("hide"));const t=c.querySelectorAll(".inner ul>li");let s=null;for(let l=0;l<n.length;l++){document.getElementById(n[l]).offsetTop<=e&&(i=t[l],s=l)}if(null!==s){if(Math.ceil(e+window.innerHeight)>=document.body.scrollHeight){for(let e=0;e<t.length;e++)t[e].classList.contains("selected")&&t[e].classList.remove("selected");t[n.length-1].classList.add("selected"),d=t[n.length-1]}else{if(i===d&&s>0)return;for(let e=0;e<t.length;e++)t[e].classList.contains("selected")&&t[e].classList.remove("selected");i.classList.add("selected"),d=i}null!==s&&c.scroll({behavior:"smooth",top:20*s})}else{if(null===c.querySelector(".selected"))return;for(let e=0;e<t.length;e++)t[e].classList.contains("selected")&&t[e].classList.remove("selected")}}a=e}});const r=document.querySelector(".main .toc.aside details");if(null!==r){new MutationObserver((e,t)=>{if(null===e[0].oldValue)for(let e=0;e<n.length;e++){let t=document.getElementById(n[e]),l=document.getElementById(n[e+1]);if(window.pageYOffset>=t.offsetTop&&window.pageYOffset<l.offsetTop){Math.ceil(window.pageYOffset+window.innerHeight)>=document.body.scrollHeight?(c.querySelectorAll(".inner ul>li")[n.length-1].classList.add("selected"),c.scrollTop=20*(n.length-1)):(c.querySelectorAll(".inner ul>li")[e].classList.add("selected"),c.scrollTop=20*e)}}}).observe(r,{attributes:!0,attributeOldValue:!0,attributeFilter:["open"]})}}),window.onload=function(){null!==e&&(document.querySelector(".main .toc.aside").scrollTop=20*e)}}