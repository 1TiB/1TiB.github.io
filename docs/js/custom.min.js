if(window.location.pathname.startsWith("/post/")){let e=null,l=null,t=null;document.addEventListener("DOMContentLoaded",()=>{const s=document.querySelector(".main .post-single>.toc"),o=s?s.offsetTop:0,n=document.querySelector("header.header"),c=document.querySelector(".main .toc"),i=[];if(null!==c){const s=c.cloneNode(!0);s.classList.add("aside"),s.querySelector("details").setAttribute("open","");const n=s.querySelectorAll(".inner ul>li");for(let e=0;e<n.length;e++)n[e].classList.contains("non-selected")||(n[e].classList.add("non-selected"),i[e]=decodeURI(n[e].querySelector("a").getAttribute("href").substring(1)));if(o<window.pageYOffset?s.classList.add("reveal"):o>=window.pageYOffset&&s.classList.add("hide"),c.parentNode.insertBefore(s,c.nextSibling),o<window.pageYOffset){const s=document.querySelectorAll(".main .toc.aside .inner ul>li");for(let o=0;o<i.length;o++){let n=document.getElementById(i[o]),c=document.getElementById(i[o+1]);console.log(c),null!==c&&window.pageYOffset>=n.offsetTop&&window.pageYOffset<c.offsetTop?(l=s[o],t=s[o+1],e=o):(l=s[o],e=o)}}}const d=document.querySelector(".main .toc.aside");let a=null,r=null,u=0;window.addEventListener("scroll",()=>{const e=window.pageYOffset;if(null!==c&&o>=e&&d.classList.contains("reveal")&&(d.scrollTop=0,d.classList.remove("reveal"),d.classList.add("hide")),e<=0&&!n.classList.contains("scroll-up"))return n.classList.remove("scroll-down"),void n.classList.add("scroll-up");if(e<=10)n.classList.remove("scroll-up");else{if(e>80&&(e>u&&!n.classList.contains("scroll-down")?(n.classList.remove("scroll-up"),n.classList.add("scroll-down")):e<u&&n.classList.contains("scroll-down")&&(n.classList.remove("scroll-down"),n.classList.add("scroll-up"))),null!==c){o<e&&d.classList.contains("hide")?(d.classList.remove("hide"),d.classList.add("reveal")):o>=e&&d.classList.contains("reveal")&&(d.scrollTop=0,d.classList.remove("reveal"),d.classList.add("hide"));const l=d.querySelectorAll(".inner ul>li");let t=null;for(let s=0;s<i.length;s++){document.getElementById(i[s]).offsetTop<=e&&(a=l[s],t=s)}if(null!==t){if(Math.ceil(e+window.innerHeight)>=document.body.scrollHeight){for(let e=0;e<l.length;e++)l[e].classList.contains("selected")&&l[e].classList.remove("selected");l[i.length-1].classList.add("selected"),r=l[i.length-1]}else{if(a===r&&t>0)return;for(let e=0;e<l.length;e++)l[e].classList.contains("selected")&&l[e].classList.remove("selected");a.classList.add("selected"),r=a}null!==t&&d.scroll({behavior:"smooth",top:20*t})}else{if(null===d.querySelector(".selected"))return;for(let e=0;e<l.length;e++)l[e].classList.contains("selected")&&l[e].classList.remove("selected")}}u=e}});const f=document.querySelector(".main .toc.aside details");if(null!==f){new MutationObserver((e,l)=>{if(null===e[0].oldValue)for(let e=0;e<i.length;e++){let l=document.getElementById(i[e]),t=document.getElementById(i[e+1]);if(null!==t&&window.pageYOffset>=l.offsetTop&&window.pageYOffset<t.offsetTop){let l=Math.ceil(window.pageYOffset+window.innerHeight)>=document.body.scrollHeight;d.querySelectorAll(".inner ul>li")[e+1].classList.contains("selected")&&d.querySelectorAll(".inner ul>li")[e+1].classList.remove("selected"),l?(d.querySelectorAll(".inner ul>li")[i.length-1].classList.add("selected"),d.scrollTop=20*(i.length-1)):(d.querySelectorAll(".inner ul>li")[e].classList.add("selected"),d.scrollTop=20*e)}}}).observe(f,{attributes:!0,attributeOldValue:!0,attributeFilter:["open"]})}}),window.onload=function(){null!==e&&(null!==t&&t.classList.remove("selected"),l.classList.add("selected"),document.querySelector(".main .toc.aside").scrollTop=20*e)}}