if(window.location.pathname.startsWith("/post/")){const e=document.querySelector(".main .post-single>.toc"),t=[];(function(e){"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e)})(function(){const l=e?e.offsetTop:0,s=document.querySelector("header.header"),o=document.querySelector(".main .toc");if(null!==o){const e=o.cloneNode(!0);e.classList.add("aside"),e.querySelector("details").setAttribute("open","");const s=e.querySelectorAll(".inner ul>li");for(let e=0;e<s.length;e++)t[e]=decodeURI(s[e].querySelector("a").getAttribute("href").substring(1));l<window.pageYOffset?e.classList.add("reveal"):l>=window.pageYOffset&&e.classList.add("hide"),o.parentNode.insertBefore(e,o.nextSibling)}const n=document.querySelector(".main .toc.aside");let i=null,c=null,a=0;window.addEventListener("scroll",()=>{const e=window.pageYOffset;if(null!==o&&l>=e&&n.classList.contains("reveal")&&(n.scrollTop=0,n.classList.remove("reveal"),n.classList.add("hide")),e<=0&&!s.classList.contains("scroll-up"))return s.classList.remove("scroll-down"),void s.classList.add("scroll-up");if(e<=10)s.classList.remove("scroll-up");else{if(e>80&&(e>a&&!s.classList.contains("scroll-down")?(s.classList.remove("scroll-up"),s.classList.add("scroll-down")):e<a&&s.classList.contains("scroll-down")&&(s.classList.remove("scroll-down"),s.classList.add("scroll-up"))),null!==o){l<e&&n.classList.contains("hide")?(n.classList.remove("hide"),n.classList.add("reveal")):l>=e&&n.classList.contains("reveal")&&(n.scrollTop=0,n.classList.remove("reveal"),n.classList.add("hide"));const s=n.querySelectorAll(".inner ul>li");let o=null;for(let l=0;l<t.length;l++){document.getElementById(t[l]).offsetTop<=e&&(i=s[l],o=l)}if(null!==o){if(Math.ceil(e+window.innerHeight)>=document.body.scrollHeight){for(let e=0;e<s.length;e++)s[e].classList.contains("selected")&&s[e].classList.remove("selected");s[t.length-1].classList.add("selected"),c=s[t.length-1]}else{if(i===c&&o>0)return;for(let e=0;e<s.length;e++)s[e].classList.contains("selected")&&s[e].classList.remove("selected");i.classList.add("selected"),c=i}null!==o&&n.scroll({behavior:"smooth",top:20*o})}else{if(null===n.querySelector(".selected"))return;for(let e=0;e<s.length;e++)s[e].classList.contains("selected")&&s[e].classList.remove("selected")}}a=e}});const d=document.querySelector(".main .toc.aside details");if(null!==d){new MutationObserver((e,l)=>{if(null===e[0].oldValue)for(let e=0;e<t.length;e++){let l=document.getElementById(t[e]),s=document.getElementById(t[e+1]);if(null!==s&&window.pageYOffset>=l.offsetTop&&window.pageYOffset<s.offsetTop){let l=Math.ceil(window.pageYOffset+window.innerHeight)>=document.body.scrollHeight;n.querySelectorAll(".inner ul>li")[e+1].classList.contains("selected")&&n.querySelectorAll(".inner ul>li")[e+1].classList.remove("selected"),l?(n.querySelectorAll(".inner ul>li")[t.length-1].classList.add("selected"),n.scrollTop=20*(t.length-1)):(n.querySelectorAll(".inner ul>li")[e].classList.add("selected"),n.scrollTop=20*e)}}}).observe(d,{attributes:!0,attributeOldValue:!0,attributeFilter:["open"]})}}),window.onload=function(){if((e?e.offsetTop:0)<window.pageYOffset){const e=document.querySelectorAll(".main .toc.aside .inner ul>li");for(let l=0;l<t.length;l++){let s=document.getElementById(t[l]),o=document.getElementById(t[l+1]);null!==o&&window.pageYOffset>=s.offsetTop&&window.pageYOffset<o.offsetTop&&(null!==e[l+1]&&e[l+1].classList.remove("selected"),e[l].classList.add("selected"),document.querySelector(".main .toc.aside").scrollTop=20*l)}}}}else if(window.location.pathname.startsWith("/archives/"))function layer_toggle(e,t){const l=document.getElementById(e),s=t.querySelector(".toggle");"none"===l.style.display||""===l.style.display?(s.innerText="📂",l.style.display="block"):"block"===l.style.display&&(s.innerText="📁",l.style.display="none")}