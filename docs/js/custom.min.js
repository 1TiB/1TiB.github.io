if(window.location.pathname.startsWith("/post/")){let e=null;document.addEventListener("DOMContentLoaded",()=>{const s=document.querySelector(".main .post-single>.toc").offsetTop,t=document.querySelector("header.header"),l=document.querySelector(".main .toc"),o=[];if(null!==l){const t=l.cloneNode(!0);t.classList.add("aside"),t.querySelector("details").setAttribute("open","");const c=t.querySelectorAll(".inner ul>li");for(let e=0;e<c.length;e++)c[e].classList.contains("non-selected")||(c[e].classList.add("non-selected"),o[e]=decodeURI(c[e].querySelector("a").getAttribute("href")));if(s<window.pageYOffset?t.classList.add("reveal"):s>=window.pageYOffset&&t.classList.add("hide"),l.parentNode.insertBefore(t,l.nextSibling),s<window.pageYOffset){const s=document.querySelectorAll(".main .toc.aside .inner ul>li");for(let t=0;t<o.length;t++){let l=document.querySelector(o[t+1]),c=document.querySelector(o[t]);window.pageYOffset>=c.offsetTop&&window.pageYOffset<l.offsetTop&&(s[t].classList.add("selected"),e=t)}}}const c=document.querySelector(".main .toc.aside");let n=null,i=null,r=0;window.addEventListener("scroll",()=>{const e=window.pageYOffset;if(s>=e&&c.classList.contains("reveal")&&(c.scrollTop=0,c.classList.remove("reveal"),c.classList.add("hide")),e<=0&&!t.classList.contains("scroll-up"))return t.classList.remove("scroll-down"),void t.classList.add("scroll-up");if(e<=10)t.classList.remove("scroll-up");else{if(e>80&&(e>r&&!t.classList.contains("scroll-down")?(t.classList.remove("scroll-up"),t.classList.add("scroll-down")):e<r&&t.classList.contains("scroll-down")&&(t.classList.remove("scroll-down"),t.classList.add("scroll-up"))),null!==l){s<e&&c.classList.contains("hide")?(c.classList.remove("hide"),c.classList.add("reveal")):s>=e&&c.classList.contains("reveal")&&(c.scrollTop=0,c.classList.remove("reveal"),c.classList.add("hide"));const t=c.querySelectorAll(".inner ul>li");let l=null;for(let s=0;s<o.length;s++){document.querySelector(o[s]).offsetTop<=e&&(n=t[s],l=s)}if(null!==l){if(Math.ceil(e+window.innerHeight)>=document.body.scrollHeight){for(let e=0;e<t.length;e++)t[e].classList.contains("selected")&&t[e].classList.remove("selected");t[o.length-1].classList.add("selected"),i=t[o.length-1]}else{if(n===i&&l>0)return;for(let e=0;e<t.length;e++)t[e].classList.contains("selected")&&t[e].classList.remove("selected");n.classList.add("selected"),i=n}null!==l&&c.scroll({behavior:"smooth",top:20*l})}else{if(null===c.querySelector(".selected"))return;for(let e=0;e<t.length;e++)t[e].classList.contains("selected")&&t[e].classList.remove("selected")}}r=e}});const a=document.querySelector(".main .toc.aside details");new MutationObserver((e,s)=>{if(null===e[0].oldValue)for(let e=0;e<o.length;e++){let s=document.querySelector(o[e+1]),t=document.querySelector(o[e]);window.pageYOffset>=t.offsetTop&&window.pageYOffset<s.offsetTop&&(c.querySelectorAll(".inner ul>li")[e].classList.add("selected"),c.scrollTop=20*e)}}).observe(a,{attributes:!0,attributeOldValue:!0,attributeFilter:["open"]})}),window.onload=function(){null!==e&&(document.querySelector(".main .toc.aside").scrollTop=20*e)}}